{% extends "adminpanel/base.html" %}
{% block title %}Users{% endblock %}
{% block header %}User Management{% endblock %}

{% block content %}
<style>
.badge {
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
}
.badge-admin { background:#dc2626; color:white; }
.badge-staff { background:#2563eb; color:white; }
.badge-user { background:#9ca3af; color:white; }
</style>

<style>
    .btn-sm {
    padding: 6px 14px;
    border-radius: 8px;
    font-size: 13px;
    text-decoration: none;
    font-weight: 500;
}

.btn-view {
    background: #e0e7ff;
    color: #3730a3;
}

.btn-view:hover {
    background: #c7d2fe;
}

.btn-delete {
    background: #fee2e2;
    color: #991b1b;
}

.btn-delete:hover {
    background: #fecaca;
}

</style>
<div class="card">
    <div class="card-header flex-between">
        <h2>System Users</h2>
        <a href="{% url 'vivaan_admin:user_create' %}" class="btn-primary">
            + Create User
        </a>
    </div>

    <table class="admin-table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th>Date Joined</th>
                <th>Last Login</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for u in users %}
            <tr>
                <td><strong>{{ u.username }}</strong></td>
                <td>{{ u.email }}</td>
                <td>
                    {% if u.is_superuser %}
                        <span class="badge badge-admin">Super Admin</span>
                    {% elif u.is_staff %}
                        <span class="badge badge-staff">Staff</span>
                    {% else %}
                        <span class="badge badge-user">User</span>
                    {% endif %}
                </td>
                <td>{{ u.date_joined|date:"M d, Y" }}</td>
                <td>{{ u.last_login|date:"M d, Y H:i"|default:"Never" }}</td>
                <td>
                    <a href="{% url 'vivaan_admin:user_edit' u.id %}" class="btn-sm btn-view">Edit</a>
                    <a href="{% url 'vivaan_admin:user_delete' u.id %}"
                       class="btn-sm btn-delete"
                       onclick="return confirm('Delete this user?');">
                        Delete
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6" style="text-align:center;color:#6b7280;">
                    No users found.
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
