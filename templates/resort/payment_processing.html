{% extends "resort/base.html" %}
{% block content %}

<div class="min-h-screen flex flex-col items-center justify-center">
    <h2 class="text-2xl font-bold text-emerald-700 mb-2">
        Payment Successful ðŸŽ‰
    </h2>

    <p class="text-gray-600 mb-4">
        Confirming your bookingâ€¦
    </p>

    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-700"></div>
</div>

<script>
const orderId = localStorage.getItem("rzp_order_id");

const timer = setInterval(() => {
    fetch(`/check-booking-status/?order_id=${orderId}`)
        .then(res => res.json())
        .then(data => {
            if (data.ready) {
                clearInterval(timer);
                window.location.href = `/booking/${data.booking_id}/`;
            }
        });
}, 1500);
</script>

{% endblock %}
